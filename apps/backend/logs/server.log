[2026-01-03T22:43:24.683Z] [DEBUG] üß≠ Route hit: GET /api/messages
[2026-01-03T22:43:36.069Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates
[2026-01-03T22:43:39.079Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/5/preview
[2026-01-03T22:43:39.081Z] [DEBUG] Preview request: {"id":"5"}
[2026-01-03T22:43:39.082Z] [DEBUG] Template found: RSVP Reminder
[2026-01-03T22:43:39.084Z] [DEBUG] Sample guests found: 5
[2026-01-03T22:43:39.084Z] [DEBUG] [VAR_RESOLVE] System settings cache miss - fetching from database
[2026-01-03T22:43:39.084Z] [DEBUG] Getting variables for first sample guest
[2026-01-03T22:43:39.084Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":31,"guestName":"Alice","hasTemplate":false}
[2026-01-03T22:43:39.088Z] [DEBUG] [VAR_RESOLVE] System settings cached {"keys":["id","enable_global_countdown","wedding_date","venue_name","venue_address","event_start_date","event_end_date","event_time","bride_name","groom_name","contact_email","contact_phone","event_type","dress_code","special_instructions","website_url","app_title","created_at","updated_at","rsvp_deadline"]}
[2026-01-03T22:43:39.088Z] [DEBUG] [VAR_RESOLVE] Sender info cache miss - fetching from database
[2026-01-03T22:43:39.090Z] [DEBUG] [VAR_RESOLVE] Sender info cached
[2026-01-03T22:43:39.090Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":0}
[2026-01-03T22:43:39.090Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:43:39.139Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":true}
[2026-01-03T22:43:39.139Z] [DEBUG] Variables prepared: ["guestName","groupLabel","code","rsvpCode","rsvpLink","plusOneName","plus_one_name","rsvpDeadline","email","preferredLanguage","attending","rsvp_status","responded_at","can_bring_plus_one","dietary","notes","hasPlusOne","has_plus_one","isPlusOne","hasResponded","isAttending","isNotAttending","isPending","isBrideFamily","isGroomFamily","isEnglishSpeaker","isLithuanianSpeaker","siteUrl","websiteUrl","weddingDate","venueName","venueAddress","eventStartDate","eventEndDate","eventTime","brideName","groomName","contactEmail","contactPhone","rsvpDeadlineDate","eventType","dressCode","specialInstructions","appTitle","senderName","senderEmail","currentDate","daysUntilWedding","name"]
[2026-01-03T22:43:39.139Z] [DEBUG] Sample variables: {"guestName":"Alice","groupLabel":"Alice","rsvp_status":"not_attending","isPlusOne":false,"canBringPlusOne":1,"isAttending":false}
[2026-01-03T22:43:39.139Z] [DEBUG] Selected guest for preview: Alice
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":371,"variableCount":49}
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":371}
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":371,"resultLength":347}
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":276,"variableCount":49}
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":276,"resultLength":252}
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":45}
[2026-01-03T22:43:39.140Z] [DEBUG] Variable replacement results:
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":276}
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":45,"resultLength":37}
[2026-01-03T22:43:39.140Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":45,"variableCount":49}
[2026-01-03T22:43:39.140Z] [DEBUG] Original subject_en: Please RSVP for our wedding en, {{guestName}}
[2026-01-03T22:43:39.140Z] [DEBUG] Original body_en length: 371
[2026-01-03T22:43:39.140Z] [DEBUG] Original subject_lt: Please RSVP for our wedding lt, {{guestName}}
[2026-01-03T22:43:39.140Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:39.140Z] [DEBUG] Replaced body_en length: 347
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"modern","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":347,"hasHeaderImage":true,"hasCustomTitle":true}
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Header image extracted {"url":"http://localhost:5001/uploads/peeps-avatar.png..."}
[2026-01-03T22:43:39.140Z] [DEBUG] Replaced subject: Please RSVP for our wedding en, Alice
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"RSVP Reminder","isCustom":true}
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":13,"titleFontSize":82}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Loading logo (PNG ‚Üí SVG ‚Üí text fallback)
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Custom email title extracted {"title":"RSVP Reminder"}
[2026-01-03T22:43:39.141Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":true,"titleFontSize":82,"displayTitle":"RSVP Reminder"}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Logo loaded: PNG (base64)
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"modern","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"modern","contentLength":347}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":252,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"modern","contentLength":252}
[2026-01-03T22:43:39.142Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:39.142Z] [DEBUG] Preview response prepared with style: modern
[2026-01-03T22:43:45.655Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/6/preview
[2026-01-03T22:43:45.656Z] [DEBUG] Preview request: {"id":"6"}
[2026-01-03T22:43:45.656Z] [DEBUG] Template found: Wedding Update
[2026-01-03T22:43:45.658Z] [DEBUG] Sample guests found: 5
[2026-01-03T22:43:45.658Z] [DEBUG] Getting variables for first sample guest
[2026-01-03T22:43:45.658Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":31,"guestName":"Alice","hasTemplate":false}
[2026-01-03T22:43:45.658Z] [DEBUG] [VAR_RESOLVE] System settings cache hit
[2026-01-03T22:43:45.658Z] [DEBUG] [VAR_RESOLVE] Sender info cache hit
[2026-01-03T22:43:45.658Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":0}
[2026-01-03T22:43:45.660Z] [DEBUG] Selected guest for preview: Alice
[2026-01-03T22:43:45.660Z] [DEBUG] Variables prepared: ["guestName","groupLabel","code","rsvpCode","rsvpLink","plusOneName","plus_one_name","rsvpDeadline","email","preferredLanguage","attending","rsvp_status","responded_at","can_bring_plus_one","dietary","notes","hasPlusOne","has_plus_one","isPlusOne","hasResponded","isAttending","isNotAttending","isPending","isBrideFamily","isGroomFamily","isEnglishSpeaker","isLithuanianSpeaker","siteUrl","websiteUrl","weddingDate","venueName","venueAddress","eventStartDate","eventEndDate","eventTime","brideName","groomName","contactEmail","contactPhone","rsvpDeadlineDate","eventType","dressCode","specialInstructions","appTitle","senderName","senderEmail","currentDate","daysUntilWedding","name"]
[2026-01-03T22:43:45.658Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:43:45.660Z] [DEBUG] Sample variables: {"guestName":"Alice","groupLabel":"Alice","rsvp_status":"not_attending","isPlusOne":false,"canBringPlusOne":1,"isAttending":false}
[2026-01-03T22:43:45.659Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":true}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":370}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Variable not found {"key":"updateDetails"}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":370,"resultLength":345}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":241,"variableCount":49}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":241}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Variable not found {"key":"updateDetails"}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":370,"variableCount":49}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":241,"resultLength":216}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":39,"variableCount":49}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":39}
[2026-01-03T22:43:45.660Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:45.660Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":39,"resultLength":31}
[2026-01-03T22:43:45.660Z] [DEBUG] Variable replacement results:
[2026-01-03T22:43:45.660Z] [DEBUG] Original subject_en: Important wedding update, {{guestName}}
[2026-01-03T22:43:45.660Z] [DEBUG] Original subject_lt: Important wedding update, {{guestName}}
[2026-01-03T22:43:45.660Z] [DEBUG] Replaced subject: Important wedding update, Alice
[2026-01-03T22:43:45.660Z] [DEBUG] Original body_en length: 370
[2026-01-03T22:43:45.660Z] [DEBUG] Replaced body_en length: 345
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":345,"hasHeaderImage":true,"hasCustomTitle":true}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Header image extracted {"url":"http://localhost:5001/uploads/peeps-avatar.png..."}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Custom email title extracted {"title":"Wedding update"}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Wedding update","isCustom":true}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":14,"titleFontSize":76}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":true,"titleFontSize":76,"displayTitle":"Wedding update"}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":345}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":216,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:45.660Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:45.661Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:45.661Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":216}
[2026-01-03T22:43:45.661Z] [DEBUG] Preview response prepared with style: elegant
[2026-01-03T22:43:45.661Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:54.083Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/9/preview
[2026-01-03T22:43:54.083Z] [DEBUG] Preview request: {"id":"9"}
[2026-01-03T22:43:54.085Z] [DEBUG] Template found: Group-Specific Welcome
[2026-01-03T22:43:54.086Z] [DEBUG] Sample guests found: 5
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] Sender info cache hit
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":31,"guestName":"Alice","hasTemplate":false}
[2026-01-03T22:43:54.086Z] [DEBUG] Getting variables for first sample guest
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":0}
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] System settings cache hit
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":true}
[2026-01-03T22:43:54.087Z] [DEBUG] Sample variables: {"guestName":"Alice","groupLabel":"Alice","rsvp_status":"not_attending","isPlusOne":false,"canBringPlusOne":1,"isAttending":false}
[2026-01-03T22:43:54.086Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:43:54.087Z] [DEBUG] Selected guest for preview: Alice
[2026-01-03T22:43:54.087Z] [DEBUG] Variables prepared: ["guestName","groupLabel","code","rsvpCode","rsvpLink","plusOneName","plus_one_name","rsvpDeadline","email","preferredLanguage","attending","rsvp_status","responded_at","can_bring_plus_one","dietary","notes","hasPlusOne","has_plus_one","isPlusOne","hasResponded","isAttending","isNotAttending","isPending","isBrideFamily","isGroomFamily","isEnglishSpeaker","isLithuanianSpeaker","siteUrl","websiteUrl","weddingDate","venueName","venueAddress","eventStartDate","eventEndDate","eventTime","brideName","groomName","contactEmail","contactPhone","rsvpDeadlineDate","eventType","dressCode","specialInstructions","appTitle","senderName","senderEmail","currentDate","daysUntilWedding","name"]
[2026-01-03T22:43:54.087Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":828,"variableCount":49}
[2026-01-03T22:43:54.087Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":828}
[2026-01-03T22:43:54.087Z] [DEBUG] [CONDITIONAL] Evaluating condition {"condition":"groupLabel === 'Bride\\'s Family'"}
[2026-01-03T22:43:54.087Z] [DEBUG] [CONDITIONAL] Processed if/else block {"condition":"groupLabel === 'Bride\\'s Family'","result":false,"blockNumber":1}
[2026-01-03T22:43:54.087Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":331,"resultLength":305}
[2026-01-03T22:43:54.088Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":819,"variableCount":49}
[2026-01-03T22:43:54.087Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":1}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":819}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Evaluating condition {"condition":"groupLabel === 'Bride\\'s Family'"}
[2026-01-03T22:43:54.087Z] [DEBUG] [CONDITIONAL] Condition evaluated {"condition":"groupLabel === 'Bride\\'s Family'","result":false,"operator":"==="}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Processed if/else block {"condition":"groupLabel === 'Bride\\'s Family'","result":false,"blockNumber":1}
[2026-01-03T22:43:54.088Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":50,"variableCount":49}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Condition evaluated {"condition":"groupLabel === 'Bride\\'s Family'","result":false,"operator":"==="}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":50}
[2026-01-03T22:43:54.088Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":50,"resultLength":33}
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":1}
[2026-01-03T22:43:54.088Z] [DEBUG] Variable replacement results:
[2026-01-03T22:43:54.088Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:54.088Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":322,"resultLength":296}
[2026-01-03T22:43:54.088Z] [DEBUG] Original subject_en: Special welcome for {{groupLabel}}, {{guestName}}!
[2026-01-03T22:43:54.088Z] [DEBUG] Replaced subject: Special welcome for Alice, Alice!
[2026-01-03T22:43:54.088Z] [DEBUG] Original body_en length: 828
[2026-01-03T22:43:54.088Z] [DEBUG] Replaced body_en length: 305
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":305,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:54.088Z] [DEBUG] Original subject_lt: Special welcome for {{groupLabel}}, {{guestName}}!
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"friendly","contentLength":305}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"friendly","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":296,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"friendly","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"friendly","contentLength":296}
[2026-01-03T22:43:54.088Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:54.088Z] [DEBUG] Preview response prepared with style: friendly
[2026-01-03T22:43:58.521Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/8/preview
[2026-01-03T22:43:58.521Z] [DEBUG] Preview request: {"id":"8"}
[2026-01-03T22:43:58.522Z] [DEBUG] Template found: Thank You - Not Attending
[2026-01-03T22:43:58.523Z] [DEBUG] Sample guests found: 5
[2026-01-03T22:43:58.523Z] [DEBUG] Getting variables for first sample guest
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] Sender info cache hit
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] System settings cache hit
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":31,"guestName":"Alice","hasTemplate":false}
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":0}
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:43:58.524Z] [DEBUG] Selected guest for preview: Alice
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":236,"variableCount":49}
[2026-01-03T22:43:58.524Z] [DEBUG] Sample variables: {"guestName":"Alice","groupLabel":"Alice","rsvp_status":"not_attending","isPlusOne":false,"canBringPlusOne":1,"isAttending":false}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":236}
[2026-01-03T22:43:58.524Z] [DEBUG] Variables prepared: ["guestName","groupLabel","code","rsvpCode","rsvpLink","plusOneName","plus_one_name","rsvpDeadline","email","preferredLanguage","attending","rsvp_status","responded_at","can_bring_plus_one","dietary","notes","hasPlusOne","has_plus_one","isPlusOne","hasResponded","isAttending","isNotAttending","isPending","isBrideFamily","isGroomFamily","isEnglishSpeaker","isLithuanianSpeaker","siteUrl","websiteUrl","weddingDate","venueName","venueAddress","eventStartDate","eventEndDate","eventTime","brideName","groomName","contactEmail","contactPhone","rsvpDeadlineDate","eventType","dressCode","specialInstructions","appTitle","senderName","senderEmail","currentDate","daysUntilWedding","name"]
[2026-01-03T22:43:58.523Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":true}
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":236,"resultLength":228}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":263,"variableCount":49}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":263}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":38,"variableCount":49}
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":263,"resultLength":255}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":38}
[2026-01-03T22:43:58.524Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":38,"resultLength":30}
[2026-01-03T22:43:58.524Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:43:58.524Z] [DEBUG] Variable replacement results:
[2026-01-03T22:43:58.524Z] [DEBUG] Original subject_en: Thank you for your RSVP, {{guestName}}
[2026-01-03T22:43:58.524Z] [DEBUG] Original subject_lt: Thank you for your RSVP, {{guestName}}
[2026-01-03T22:43:58.524Z] [DEBUG] Original body_en length: 236
[2026-01-03T22:43:58.524Z] [DEBUG] Replaced body_en length: 228
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":228,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:58.524Z] [DEBUG] Replaced subject: Thank you for your RSVP, Alice
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":228}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":255,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:43:58.524Z] [DEBUG] Preview response prepared with style: elegant
[2026-01-03T22:43:58.524Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":255}
[2026-01-03T22:44:05.534Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/4/preview
[2026-01-03T22:44:05.534Z] [DEBUG] Preview request: {"id":"4"}
[2026-01-03T22:44:05.535Z] [DEBUG] Template found: Welcome Message
[2026-01-03T22:44:05.536Z] [DEBUG] Sample guests found: 5
[2026-01-03T22:44:05.536Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":31,"guestName":"Alice","hasTemplate":false}
[2026-01-03T22:44:05.536Z] [DEBUG] Getting variables for first sample guest
[2026-01-03T22:44:05.536Z] [DEBUG] [VAR_RESOLVE] System settings cache hit
[2026-01-03T22:44:05.536Z] [DEBUG] [VAR_RESOLVE] Sender info cache hit
[2026-01-03T22:44:05.536Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":true}
[2026-01-03T22:44:05.536Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":0}
[2026-01-03T22:44:05.537Z] [DEBUG] Variables prepared: ["guestName","groupLabel","code","rsvpCode","rsvpLink","plusOneName","plus_one_name","rsvpDeadline","email","preferredLanguage","attending","rsvp_status","responded_at","can_bring_plus_one","dietary","notes","hasPlusOne","has_plus_one","isPlusOne","hasResponded","isAttending","isNotAttending","isPending","isBrideFamily","isGroomFamily","isEnglishSpeaker","isLithuanianSpeaker","siteUrl","websiteUrl","weddingDate","venueName","venueAddress","eventStartDate","eventEndDate","eventTime","brideName","groomName","contactEmail","contactPhone","rsvpDeadlineDate","eventType","dressCode","specialInstructions","appTitle","senderName","senderEmail","currentDate","daysUntilWedding","name"]
[2026-01-03T22:44:05.537Z] [DEBUG] Sample variables: {"guestName":"Alice","groupLabel":"Alice","rsvp_status":"not_attending","isPlusOne":false,"canBringPlusOne":1,"isAttending":false}
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:05.537Z] [DEBUG] Selected guest for preview: Alice
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":282}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":282,"variableCount":49}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":282,"resultLength":261}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":274,"variableCount":49}
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":274}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Variable not found {"key":"eventStartTime"}
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":50}
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:05.537Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":50,"variableCount":49}
[2026-01-03T22:44:05.537Z] [DEBUG] Variable replacement results:
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":274,"resultLength":235}
[2026-01-03T22:44:05.537Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":50,"resultLength":42}
[2026-01-03T22:44:05.537Z] [DEBUG] Original subject_en: Welcome to our wedding celebration, {{guestName}}!
[2026-01-03T22:44:05.537Z] [DEBUG] Original subject_lt: Welcome to our wedding celebration lt, {{guestName}}!
[2026-01-03T22:44:05.537Z] [DEBUG] Replaced subject: Welcome to our wedding celebration, Alice!
[2026-01-03T22:44:05.537Z] [DEBUG] Replaced body_en length: 261
[2026-01-03T22:44:05.537Z] [DEBUG] Original body_en length: 282
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":261,"hasHeaderImage":false,"hasCustomTitle":true}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Welcome to our wedding","isCustom":true}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Custom email title extracted {"title":"Welcome to our wedding"}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Welcome to our wedding"}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":261}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":235,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":235}
[2026-01-03T22:44:05.537Z] [DEBUG] Preview response prepared with style: elegant
[2026-01-03T22:44:05.537Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":22,"titleFontSize":64}
[2026-01-03T22:44:12.730Z] [DEBUG] üß≠ Route hit: GET /api/messages
[2026-01-03T22:44:14.887Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates/styles
[2026-01-03T22:44:14.888Z] [DEBUG] üì§ Sending response
[2026-01-03T22:44:14.888Z] [DEBUG] üîç Fetching template styles...
[2026-01-03T22:44:14.888Z] [DEBUG] üìã Available styles: [
  {
    "key": "elegant",
    "name": "Elegant",
    "description": "Premium design with cursive titles, sans body, optional header image, and signature footer",
    "header": {
      "background": "#E9E7D9",
      "border": "2px solid #D2C6B2",
      "titleFont": "'Great Vibes', Georgia, serif",
      "titleSize": "42px",
      "titleColor": "#442727"
    },
    "content": {
      "background": "#E9E7D9",
      "boxShadow": "none",
      "bodyFont": "'Open Sans', Arial, sans-serif",
      "bodySize": "16px",
      "lineHeight": "1.7"
    },
    "button": {
      "background": "#DAA520",
      "textColor": "#442727",
      "border": "2px solid #442727",
      "font": "'Open Sans', Arial, Helvetica, sans-serif",
      "fontSize": "16px",
      "fontWeight": "700",
      "borderRadius": "6px",
      "padding": "14px 28px"
    },
    "footer": {
      "background": "#E9E7D9",
      "border": "2px solid #D2C6B2",
      "font": "'Lora', Georgia, 'Times New Roman', serif",
      "fontSize": "16px",
      "signatureFont": "'Great Vibes', 'Brush Script MT', 'Lucida Handwriting', cursive, Georgia, 'Times New Roman', serif",
      "signatureSize": "88px"
    }
  },
  {
    "key": "modern",
    "name": "Modern",
    "description": "Clean, minimalist design with sans-serif fonts",
    "header": {
      "background": "linear-gradient(135deg, #DAA52080 0%, #E3B13F60 50%, #DAA52080 100%)",
      "border": "1px solid #E3B13F20",
      "titleFont": "'Great Vibes', cursive",
      "titleSize": "42px",
      "titleColor": "#442727"
    },
    "content": {
      "background": "#F1EFE8",
      "boxShadow": "0 4px 6px rgba(0, 0, 0, 0.1)",
      "bodyFont": "'Open Sans', sans-serif",
      "bodySize": "16px",
      "lineHeight": "1.5"
    },
    "button": {
      "background": "#442727",
      "textColor": "#DAA520",
      "font": "'Open Sans', sans-serif",
      "fontSize": "16px",
      "fontWeight": "600",
      "borderRadius": "8px",
      "padding": "12px 24px"
    },
    "footer": {
      "background": "linear-gradient(135deg, #DAA52080 0%, #E3B13F60 50%, #DAA52080 100%)",
      "border": "1px solid #E3B13F20",
      "font": "'Open Sans', sans-serif",
      "fontSize": "16px"
    }
  },
  {
    "key": "friendly",
    "name": "Friendly",
    "description": "Warm, approachable design with glass effects",
    "header": {
      "background": "linear-gradient(135deg, #DAA52080 0%, #E3B13F60 50%, #DAA52080 100%)",
      "border": "1px solid #E3B13F20",
      "titleFont": "'Great Vibes', cursive",
      "titleSize": "42px",
      "titleColor": "#DAA520"
    },
    "content": {
      "background": "linear-gradient(to right bottom, #E9E7D980, #D2C6B260)",
      "boxShadow": "none",
      "bodyFont": "'Open Sans', sans-serif",
      "bodySize": "16px",
      "lineHeight": "1.6"
    },
    "button": {
      "background": "#442727",
      "textColor": "#DAA520",
      "font": "'Open Sans', sans-serif",
      "fontSize": "16px",
      "fontWeight": "600",
      "borderRadius": "8px",
      "padding": "12px 24px"
    },
    "footer": {
      "background": "linear-gradient(135deg, #DAA52080 0%, #E3B13F60 50%, #DAA52080 100%)",
      "border": "1px solid #E3B13F20",
      "font": "'Open Sans', sans-serif",
      "fontSize": "16px"
    }
  }
]
[2026-01-03T22:44:14.888Z] [DEBUG] ‚úÖ Response sent successfully
[2026-01-03T22:44:14.889Z] [DEBUG] ‚úÖ Auth passed, hitting template route: GET /api/templates
[2026-01-03T22:44:41.405Z] [DEBUG] üß≠ Route hit: POST /api/messages
[2026-01-03T22:44:41.405Z] [DEBUG] üß∞ [messages.js] POST /api/messages hit with body: {"subject":"Welcome to our wedding celebration, {{guestName}}!","body_en":"<!--EMAIL_TITLE:Welcome to our wedding-->\n<p>Dear {{guestName}},</p><p>We are thrilled to invite you to our special day!</p><h2>Event Details:</h2><p><strong>Date: </strong>{{eventStartDate}}</p><p><strong>Venue:</strong> {{venueName}}</p><p>We can't wait to celebrate with you!</p>","body_lt":"<p>Brangus {{guestName}},\n\nMums d≈æiaugiamƒós kviesdami jus ƒØ m≈´s≈≥ ypatingƒÖ dienƒÖ!\n\n**Renginio informacija:**\n- **Data:** {{eventStartDate}}\n- **Vieta:** {{venueName}}\n- **Laikas:** {{eventStartTime}}\n\nNekantriai laukiame ≈°vƒôsti su jumis!\n\nSu meile,\n{{brideName}} &amp; {{groomName}}</p>","style":"elegant","status":"draft","scheduledAt":null,"recipients":[49]}
[2026-01-03T22:44:41.405Z] [DEBUG] üß∞ [messages.js] POST /messages hit with body: {"subject":"Welcome to our wedding celebration, {{guestName}}!","body_en":"<!--EMAIL_TITLE:Welcome to our wedding-->\n<p>Dear {{guestName}},</p><p>We are thrilled to invite you to our special day!</p><h2>Event Details:</h2><p><strong>Date: </strong>{{eventStartDate}}</p><p><strong>Venue:</strong> {{venueName}}</p><p>We can't wait to celebrate with you!</p>","body_lt":"<p>Brangus {{guestName}},\n\nMums d≈æiaugiamƒós kviesdami jus ƒØ m≈´s≈≥ ypatingƒÖ dienƒÖ!\n\n**Renginio informacija:**\n- **Data:** {{eventStartDate}}\n- **Vieta:** {{venueName}}\n- **Laikas:** {{eventStartTime}}\n\nNekantriai laukiame ≈°vƒôsti su jumis!\n\nSu meile,\n{{brideName}} &amp; {{groomName}}</p>","style":"elegant","status":"draft","scheduledAt":null,"recipients":[49]}
[2026-01-03T22:44:41.405Z] [DEBUG] üß∞ [messages.js] POST /api/messages hit with headers: {"host":"localhost:5001","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:146.0) Gecko/20100101 Firefox/146.0","accept":"application/json, text/plain, */*","accept-language":"en-US,en;q=0.5","accept-encoding":"gzip, deflate, br, zstd","content-type":"application/json","content-length":"751","origin":"http://localhost:5173","sec-gpc":"1","connection":"keep-alive","referer":"http://localhost:5173/","cookie":"session_id=s%3A5.84tR7u6yeO1YnIy76a%2BdCNpAPdIJXYiw6plq6DnBjkM; rsvp_session=s%3Aj%3A%7B%22guestId%22%3A40%2C%22code%22%3A%223TMJ8Z%22%7D.hEhkdMMjEHhlPUiUchkqr%2FTjqsIUGq9h5eemNjnU8LY","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site","priority":"u=0"}
[2026-01-03T22:44:41.405Z] [DEBUG] üß∞ [messages.js] Extracted fields: {"subject":"Welcome to our wedding celebration, {{guestName}}!","body_en":"<!--EMAIL_TITLE:Welcome to our wedding-->\n<p>Dear {{guestName}},</p><p>We are thrilled to invite you to our special day!</p><h2>Event Details:</h2><p><strong>Date: </strong>{{eventStartDate}}</p><p><strong>Venue:</strong> {{venueName}}</p><p>We can't wait to celebrate with you!</p>","body_lt":"<p>Brangus {{guestName}},\n\nMums d≈æiaugiamƒós kviesdami jus ƒØ m≈´s≈≥ ypatingƒÖ dienƒÖ!\n\n**Renginio informacija:**\n- **Data:** {{eventStartDate}}\n- **Vieta:** {{venueName}}\n- **Laikas:** {{eventStartTime}}\n\nNekantriai laukiame ≈°vƒôsti su jumis!\n\nSu meile,\n{{brideName}} &amp; {{groomName}}</p>","status":"draft","scheduledAt":null,"recipients":[49],"style":"elegant"}
[2026-01-03T22:44:41.405Z] [DEBUG] üß∞ [messages.js] Inserting message with params: ["Welcome to our wedding celebration, {{guestName}}!","<!--EMAIL_TITLE:Welcome to our wedding-->\n<p>Dear {{guestName}},</p><p>We are thrilled to invite you to our special day!</p><h2>Event Details:</h2><p><strong>Date: </strong>{{eventStartDate}}</p><p><strong>Venue:</strong> {{venueName}}</p><p>We can't wait to celebrate with you!</p>","<p>Brangus {{guestName}},\n\nMums d≈æiaugiamƒós kviesdami jus ƒØ m≈´s≈≥ ypatingƒÖ dienƒÖ!\n\n**Renginio informacija:**\n- **Data:** {{eventStartDate}}\n- **Vieta:** {{venueName}}\n- **Laikas:** {{eventStartTime}}\n\nNekantriai laukiame ≈°vƒôsti su jumis!\n\nSu meile,\n{{brideName}} &amp; {{groomName}}</p>","draft",null,"elegant"]
[2026-01-03T22:44:41.421Z] [DEBUG] üß∞ [messages.js] Inserted messageId: 12
[2026-01-03T22:44:41.421Z] [DEBUG] üß∞ [messages.js] Recipients provided: [49]
[2026-01-03T22:44:41.421Z] [DEBUG] üß∞ [messages.js] Inserting recipient for guest: {"id":49,"email":"omaridj@jgyamfi.nl","preferred_language":"en"}
[2026-01-03T22:44:41.421Z] [DEBUG] üß∞ [messages.js] Guests fetched for recipients: [{"id":49,"email":"omaridj@jgyamfi.nl","preferred_language":"en"}]
[2026-01-03T22:44:41.452Z] [DEBUG] üß≠ Route hit: POST /api/messages/12/send
[2026-01-03T22:44:41.452Z] [DEBUG] ‚úÖ Route hit: POST /:id/send ‚Äî messageId: 12
[2026-01-03T22:44:41.452Z] [DEBUG] [MESSAGES] Preparing to send message {"messageId":"12","hasGuestIds":true,"guestIdsCount":1}
[2026-01-03T22:44:41.454Z] [DEBUG] üì¶ Loaded message: {"id":12,"subject":"Welcome to our wedding celebration, {{guestName}}!","body_en":"<!--EMAIL_TITLE:Welcome to our wedding-->\n<p>Dear {{guestName}},</p><p>We are thrilled to invite you to our special day!</p><h2>Event Details:</h2><p><strong>Date: </strong>{{eventStartDate}}</p><p><strong>Venue:</strong> {{venueName}}</p><p>We can't wait to celebrate with you!</p>","body_lt":"<p>Brangus {{guestName}},\n\nMums d≈æiaugiamƒós kviesdami jus ƒØ m≈´s≈≥ ypatingƒÖ dienƒÖ!\n\n**Renginio informacija:**\n- **Data:** {{eventStartDate}}\n- **Vieta:** {{venueName}}\n- **Laikas:** {{eventStartTime}}\n\nNekantriai laukiame ≈°vƒôsti su jumis!\n\nSu meile,\n{{brideName}} &amp; {{groomName}}</p>","status":"draft","scheduled_for":null,"style":"elegant","created_at":"2026-01-03T22:44:41.000Z","updated_at":"2026-01-03T22:44:41.000Z"}
[2026-01-03T22:44:41.468Z] [DEBUG] [MESSAGES] Preparing batch send {"messageId":"12","guestCount":1}
[2026-01-03T22:44:41.469Z] [DEBUG] [VAR_RESOLVE] System settings cache hit
[2026-01-03T22:44:41.469Z] [DEBUG] [VAR_RESOLVE] Sender info cache hit
[2026-01-03T22:44:41.469Z] [DEBUG] [VAR_RESOLVE] Plus-one data check {"needsPlusOneData":false,"templateContentLength":282}
[2026-01-03T22:44:41.468Z] [DEBUG] [VAR_RESOLVE] Getting template variables {"guestId":49,"guestName":"Lamar","hasTemplate":true}
[2026-01-03T22:44:41.469Z] [DEBUG] [VAR_RESOLVE] Skipping plus-one data (not needed)
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Template variables resolved {"variableCount":49,"hasPlusOne":false,"isAttending":false,"hasResponded":false}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":282}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":282,"resultLength":261}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":285,"variableCount":49}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":285}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Variable not found {"key":"eventStartTime"}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":285,"resultLength":246}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":50,"variableCount":49}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Processing conditional blocks {"templateLength":50}
[2026-01-03T22:44:41.470Z] [DEBUG] [CONDITIONAL] Conditional blocks processed {"blockCount":0}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Template variables replaced {"originalLength":50,"resultLength":42}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":261,"hasHeaderImage":false,"hasCustomTitle":true}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Custom email title extracted {"title":"Welcome to our wedding"}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Welcome to our wedding","isCustom":true}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Welcome to our wedding"}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":261}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Generating email HTML {"style":"elegant","hasContent":true,"hasOptions":true}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Starting definitive email HTML generation {"contentLength":246,"hasHeaderImage":false,"hasCustomTitle":false}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Title resolved {"displayTitle":"Brigita-local & Jeffrey-local","isCustom":false}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":29,"titleFontSize":64}
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Template generation complete {"hasHeaderImage":false,"titleFontSize":64,"displayTitle":"Brigita-local & Jeffrey-local"}
[2026-01-03T22:44:41.471Z] [DEBUG] [TEMPLATE_GEN] Logo loaded from cache
[2026-01-03T22:44:41.470Z] [DEBUG] [TEMPLATE_GEN] Title font size calculated {"titleLength":22,"titleFontSize":64}
[2026-01-03T22:44:41.470Z] [DEBUG] [VAR_RESOLVE] Replacing template variables {"templateLength":282,"variableCount":49}
[2026-01-03T22:44:41.471Z] [DEBUG] [EMAIL_SERVICE] Batch sending {"emailCount":1,"batchSize":1}
[2026-01-03T22:44:41.471Z] [DEBUG] [TEMPLATE_GEN] Email HTML generated successfully {"style":"elegant","contentLength":246}
[2026-01-03T22:44:41.772Z] [DEBUG] [EMAIL_SERVICE] Sending email {"to":"omaridj@jgyamfi.nl","subject":"Welcome to our wedding celebration, Lamar!"}
[2026-01-03T22:44:42.196Z] [INFO] [EMAIL_SERVICE] Email sent {"to":"omaridj@jgyamfi.nl","messageId":"55242ed2-6614-42c6-afbd-d40c8763d06e"}
[2026-01-03T22:44:42.200Z] [INFO] [EMAIL_SERVICE] Batch completed {"sentCount":1,"failedCount":0,"total":1}
[2026-01-03T22:44:42.200Z] [INFO] ‚úÖ Marking message as sent - 1 emails sent successfully
[2026-01-03T22:44:46.851Z] [DEBUG] üß≠ Route hit: GET /api/messages
[2026-01-03T22:53:46.027Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:46.029Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:46.040Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:53:47.791Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:47.792Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:47.803Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:53:49.798Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:49.800Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:49.809Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:53:51.753Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:51.755Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:51.763Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:53:54.864Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:54.866Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:54.882Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:53:57.886Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:53:57.889Z] [INFO] Server is running on port 5001
[2026-01-03T22:53:57.901Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:00.577Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:00.579Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:00.596Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:02.589Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:02.590Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:02.597Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:04.517Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:04.520Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:04.529Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:06.245Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:06.247Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:06.256Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:08.567Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:08.569Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:08.577Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:12.707Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:12.709Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:12.719Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:17.099Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:17.101Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:17.109Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:20.599Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:20.601Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:20.611Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:22.210Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:22.212Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:22.219Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:23.770Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:23.773Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:23.780Z] [INFO] ‚úÖ Connected to MySQL database.
[2026-01-03T22:54:35.490Z] [DEBUG] üìÖ Scheduler started successfully (currently set to run every hour).
[2026-01-03T22:54:35.492Z] [INFO] Server is running on port 5001
[2026-01-03T22:54:35.501Z] [INFO] ‚úÖ Connected to MySQL database.
